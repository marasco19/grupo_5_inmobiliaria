<%- include("./partials/heads/headDef.ejs") %>
    <div id="container-main">
        <%- include("./partials/header") %> 
        <main>
            
            <div class="container">
                <!-- APPLICATION -->
                <div id="App" class="row pt-5">
                    <div class="card-title">
                        <h3>Editar <%= propiedad.titulo %></h3>
                    </div>
                    <!-- FORM -->
                    <div class="col-md-12">
                        <div class="card">
                            <form method="POST" action="/admin/<%=propiedad.id%>?_method=PUT"  id="product-form" class="card-body" enctype="multipart/form-data">
                                <div id="errores">
                                    <ul class="errores"></ul> 
                                </div>
                                <div class="card-header">
                                    <h5>Información General:</h5>
                                </div>
                                <div class="form-group">
                                    <label>Titulo</label>
                                    <input type="text" id="titulo" placeholder="" class="form-control" value="<%= propiedad.titulo %>" name="titulo">
                                </div>
                                <div class="form-group">
                                    <label>Estado</label>
                                    <select type="select" id="estado"  class="form-control" name="estado">
                                        <%
                                        var options = ["activo", "inactivo"];
                                        for ( var i = 0; i < options.length; i++ ){
                                            var selected = ( propiedad.estado == options[i] ) ? "selected" : "";
                                        %>
                                        <option value="<%=options[ i ] %>" <%=selected %>><%=options[i] %></option>
                                        <% } %>
                                    </select>    
                                </div>
                                <div class="form-group">
                                    <label>Tipo de operación:</label>
                                    <select type="select" id="tipoperacion"  class="form-control" name="tipopercion">
                                        <%
                                        var options = ["alquiler", "venta"];
                                        for ( var i = 0; i < options.length; i++ ){
                                            var selected = ( propiedad.tipoperacion == options[i] ) ? "selected" : "";
                                        %>
                                        <option value="<%=options[ i ] %>" <%=selected %>><%=options[i] %></option>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Tipo de propiedad:</label>
                                    <select type="select" id="tipopropiedad"  class="form-control" name="tipopropiedad">
                                         <%
                                        var options = ["Departamento", "Casa", "Oficina", "Terreno", "local"];
                                        for ( var i = 0; i < options.length; i++ ){
                                            var selected = ( propiedad.tipopropiedad == options[i] ) ? "selected" : "";
                                        %>
                                        <option value="<%= i + 1 %>" <%=selected %>><%=options[i] %></option>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Precio:</label>
                                    <input type="number" name="precio" placeholder="0" class="form-control" value="<%=propiedad.precio %>">
                                </div>
                                <div class="form-group">
                                    <label>Moneda:</label>
                                    <select type="select" name="moneda"  class="form-control">
                                        <%
                                        var options = ["$", "U$D"];
                                        for ( var i = 0; i < options.length; i++ ){
                                            var selected = ( propiedad.moneda == options[i] ) ? "selected" : "";
                                        %>
                                        <option value="$"  selected><%=options[i]%></option>
                                        <% } %>
                                    </select>    
                                </div>
                                <div class="form-group">
                                    <label>Dirección:</label>
                                    <input type="text" name="direccion" placeholder="" class="form-control"  value="<%=propiedad.direccion %>">
                                </div>
                                <div class="form-group">
                                    <label>Barrio:</label>
                                    <input type="text" name="barrio" placeholder="" class="form-control"  value="<%= propiedad.barrio %>">
                                </div>
                                <div class="form-group">
                                    <label>Latitud (Google Maps):</label>
                                    <input type="text" name="latitud" placeholder="" class="form-control"  value="<%= propiedad.latitud %>">
                                </div>
                                <div class="form-group">
                                    <label>Longitud (Google Maps):</label>
                                    <input type="text" name="longitud" placeholder="" class="form-control"  value="<%= propiedad.longitud %>">
                                </div>
                                <div class="form-group">
                                    <label>Descripción general:</label>
                                    <textarea name="descripciongral" class="form-control"><%= propiedad.descripciongral %></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Superficie total:</label>
                                    <input type="number" name="suptotal" placeholder="0" class="form-control" value="<%= propiedad.suptotal %>">
                                </div>
                                <div class="form-group">
                                    <label>Superficie cubierta:</label>
                                    <input type="number" name="supcubierta" placeholder="0"  class="form-control" value="<%= propiedad.supcubierta %>">
                                </div>
                                <div class="form-group">    
                                    <label>Superficie descubierta:</label>
                                    <input type="number" name="supdescubierta" placeholder="0"  class="form-control" value="<%= propiedad.supdescubierta %>">
                                </div>
                                <div class="card-header">
                                    <h5>Descripción del inmueble:</h5>
                                </div>
                                    <div class="form-group">    
                                        <label for="ambientes">Ambientes:</label><br>
                                        <input type="number" name="ambientes" placeholder="0" class="form-control" value="<%= propiedad.ambientes %>">
                                        <label for="dormitorios">Cantidad de dormitorios:</label><br>
                                        <input type="number" name="dormitorios" placeholder="0" class="form-control" value="<%= propiedad.dormitorios %>" >
                                        <label for="banios">Cantidad de baños:</label><br>
                                        <input type="number" name="banios" placeholder="0" class="form-control" value="<%= propiedad.banios %>">
                                        <label for="medcocina">Medida de la cocina:</label><br>
                                        <input type="text" name="medcocina" class="form-control" value="<%= propiedad.medcocina %>" >
                                        <label for="tipococina">Tipo de cocina:</label><br>
                                        <input type="text" name="tipococina" class="form-control" value="<%= propiedad.tipococina %>" >
                                        <input type="checkbox" name="lavadero" name="lavadero" <%= propiedad.lavadero ? "checked" : "" %> >
                                        <label for="lavadero">Lavadero</label><br>
                                        <input type="checkbox" name="balcon" name="balcon" <%= propiedad.balcon ? "checked" : "" %>>
                                        <label for="balcon">Balcón:</label><br>
                                        <input type="checkbox" name="baulera" name="baulera" <%= propiedad.baulera ? "checked" : "" %>>
                                        <label for="baulera">Baulera:</label><br>
                                        <input type="checkbox" name="palier" name="palier" <%= propiedad.palier ? "checked" : "" %>>
                                        <label for="palier">Palier compartido</label><br>
                                        <input type="checkbox" name="recepcion" name="recepcion" <%= propiedad.recepcion ? "checked" : "" %>>
                                        <label for="recepcion">Recepción</label><br>
                                        <input type="checkbox" name="calefaccion" name="calefaccion" <%= propiedad.calefaccion ? "checked" : "" %>>
                                        <label for="calefaccion">Calefacción</label><br>     
                                        <input type="checkbox" name="aire" name="aire" <%= propiedad.aire ? "checked" : "" %>>
                                        <label for="aire">Aire acondicionado</label><br>     
                                            
                                </div>
                                <div class="card-header">
                                    <h5>Descripción complementaria:</h5>
                                </div>
                                <div class="form-group">    
                                    <label for="expensas">Expensas:</label><br>     
                                    <input type="number" name="expensas" placeholder="0" class="form-control" value="<%= propiedad.expensas %>" >
                                </div> 
                                <div class="form-group">    
                                    <label for="abl">ABL:</label><br>     
                                    <input type="number" name="abl" placeholder="0" class="form-control" value="<%= propiedad.abl %>" >
                                </div>
                                <div class="form-group">    
                                    <label for="tipopiso">Tipo de piso:</label><br>     
                                    <input type="text" name="tipopiso" placeholder="0" class="form-control" value="<%= propiedad.tipopiso %>" >
                                </div> 
                                <div class="form-group">    
                                    <label for="nropisos">Nº de Pisos del Edificio:</label><br>     
                                    <input type="number" name="nropisos" placeholder="0" class="form-control" value="<%= (propiedad.nropisos==null)?0:propiedad.nropisos %> ">
                                </div>
                                <div class="form-group">    
                                    <label for="dptosxpisos">Deptos. por Piso:</label><br>     
                                    <input type="text" name="dptosxpisos" placeholder="0" class="form-control" value="<%=  (propiedad.dptosxpisos==null)?0:propiedad.dptosxpisos %>" >
                                </div>
                                <div class="form-group">    
                                    <label for="ascensor">Ascensor:</label><br>     
                                    <input type="number" name="ascensor" placeholder="0" class="form-control" value="<%= (propiedad.ascensor==null)?0:propiedad.ascensor %> ">
                                </div>
                                <div class="card-header">
                                    <h5>Plano:</h5>
                                </div>
                                <input type="file" class="form-control-file" id="planos" name="planos" value="<%=propiedad.plano %>">
                                <div class="card-header">
                                    <h5>Amenities:</h5>
                                </div>
                                <div class="form-group">  
                                    <input type="checkbox" name="gimnasio" name="gimnasio" <%= propiedad.gimnasio ? "checked" : "" %>> 
                                    <label for="gimnasio">Gimnasio:</label><br>       
                                    <input type="checkbox" name="lavaderocen" name="lavaderocen" <%= propiedad.lavaderocen ? "checked" : "" %>>  
                                    <label for="lavaderocen">Lavadero Central:</label><br>       
                                    <input type="checkbox" name="sum" name="sum" <%= propiedad.sum ? "checked" : "" %>>
                                    <label for="sum">S.U.M.:</label><br>       
                                    <input type="checkbox" name="solarium" name="solarium"<%= propiedad.solarium ? "checked" : "" %>>
                                    <label for="solarium">Solarium:</label><br>       
                                    <input type="checkbox" name="salonfiestas" name="salonfiestas" <%= propiedad.salonfiestas ? "checked" : "" %>>  
                                    <label for="salonfiestas">Salón de Fiestas:</label><br>       
                                    <input type="checkbox" name="guardabici" name="guardabici" <%= propiedad.guardabici ? "checked" : "" %>>  
                                    <label for="guardabici">Guarda Bicicletas:</label><br>       
                                    <input type="checkbox" name="piscina" name="piscina" <%= propiedad.piscina ? "checked" : "" %>> 
                                    <label for="piscina">Piscina:</label><br>       
                                    <input type="checkbox" name="quincho" name="quincho" <%= propiedad.quincho ? "checked" : "" %>>
                                    <label for="quincho">Quincho:</label><br>       
                                    <input type="checkbox" name="parrilla" name="parrilla" <%= propiedad.parrilla ? "checked" : "" %>> 
                                    <label for="parrilla">Parrilla:</label><br>       
                                    <input type="checkbox" name="seguridad" name="seguridad" <%= propiedad.seguridad ? "checked" : "" %>> 
                                    <label for="seguridad">Seguridad 24 hs:</label><br>       
                                    <input type="checkbox" name="grupoelec" name="grupoelec" <%= propiedad.grupoelec ? "checked" : "" %>>
                                    <label for="grupoelec">Grupo Electrógeno:</label><br>       
                                </div>
                                <div class="card-header">
                                    <h5>Fotos Galeria</h5>
                                </div>
                                <div class="form-group">  
                                    <input type="file" class="form-control-file" id="fotos" name="fotos" multiple>
                                    <div class="image-preview" id="imagePreview">
                                       <% for ( var i = 0; i < fotosPropiedad.length; i++ ){  %>  
                                        <img src="/images/propiedades/<%=fotosPropiedad[i].dataValues.nombre %>" width="200px" height="200px" alt="Image Preview" class="image-preview__image" id="image-preview__image">
                                        
                                        <% } %>
                                        <span class="image-preview__default-text">Image Preview</span>
                                    </div>
                                </div>
                                <div class="card-header">
                                    <h5>Videos</h5>
                                </div>   
                                <div class="form-group">
                                    <label>Youtube:</label>
                                    <input type="text" name="youtube" placeholder="Ingresa un ID de video, Ej: bU1QPtOZQZU" class="form-control" value="<%= propiedad.youtube %>" >
                                </div>  
                                <div class="form-group">
                                    <label>Vimeo:</label>
                                    <input type="text" name="vimeo" placeholder="Ingresa un ID de video, Ej: 134173961" class="form-control" value="<%= propiedad.vimeo %>" >
                                </div> 
                                <input type="submit" value="Editar" class="bton bton_login">
                            </form>
                        </div>
                    </div>
            </div>          
        </main>
        <%- include("./partials/footer") %> 
    </div>
    <script src="/js/propiedadValidator.js"></script>
</body>
</html>